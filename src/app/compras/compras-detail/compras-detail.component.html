<div class="container mt-4" *ngIf="compra">
  <!-- ðŸ“Œ Detalles de la Compra -->
  <mat-card>
    <mat-card-title>Detalles de Compra</mat-card-title>
    <mat-card-content>
      <div class="detail-row"><strong>NÂ° Compra:</strong> <span>{{ compra.compraId }}</span></div>
<div class="detail-row"><strong>Fecha:</strong> <span>{{ compra.fecha | date:'dd/MM/yyyy hh:mm:ss a' }}</span></div>
<div class="detail-row"><strong>Proveedor:</strong> <span>{{ compra.proveedor?.nombre }}</span></div>
<div class="detail-row"><strong>Total:</strong> <span>${{ compra.total }}</span></div>

      <div class="detail-row" *ngIf="compra.totalPagado !== undefined">
        <strong>Total Pagado:</strong> <span>${{ compra.totalPagado }}</span>
      </div>
      <div class="detail-row" *ngIf="compra.totalPagado !== undefined">
        <strong>Saldo Pendiente:</strong> <span>${{ compra.total - (compra.totalPagado || 0) }}</span>
      </div>
      <div class="detail-row" *ngIf="compra.estado">
        <strong>Estado de Pago:</strong><span> {{ compra.estado }}</span>
      </div>
    </mat-card-content>
  </mat-card>

  <!-- ðŸ“Œ Productos -->
  <mat-card class="mt-4">
    <mat-card-title>Productos</mat-card-title>
    <mat-card-content>
      <table mat-table [dataSource]="compra.detalleCompras" class="mat-elevation-z2 w-100">

        <ng-container matColumnDef="producto">
          <th mat-header-cell *matHeaderCellDef> Producto </th>
          <td mat-cell *matCellDef="let item"> {{ item.producto?.nombre }} </td>
        </ng-container>

        <ng-container matColumnDef="cantidad">
          <th mat-header-cell *matHeaderCellDef> Cantidad </th>
          <td mat-cell *matCellDef="let item"> {{ item.cantidad }} </td>
        </ng-container>

        <ng-container matColumnDef="precioUnitario">
          <th mat-header-cell *matHeaderCellDef> Precio Unitario </th>
          <td mat-cell *matCellDef="let item"> ${{ item.precioUnitario }} </td>
        </ng-container>

        <ng-container matColumnDef="subtotal">
          <th mat-header-cell *matHeaderCellDef> Subtotal </th>
          <td mat-cell *matCellDef="let item"> ${{ item.subtotal }} </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="['producto','cantidad','precioUnitario','subtotal']"></tr>
        <tr mat-row *matRowDef="let row; columns: ['producto','cantidad','precioUnitario','subtotal'];"></tr>
      </table>
    </mat-card-content>
  </mat-card>

  <!-- ðŸ“Œ Botones -->
  <div class="mt-4 d-flex justify-content-between">
    <button mat-raised-button color="warn" (click)="router.navigate(['/compras'])">
      Volver a Compras
    </button>
    <button mat-raised-button color="primary" (click)="generarTicket(compra)">
  <mat-icon>print</mat-icon>
  Imprimir / Guardar Ticket
</button>

  </div>

</div>
